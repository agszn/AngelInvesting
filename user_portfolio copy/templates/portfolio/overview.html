<!-- user_portfolio/templates/portfolio/overview.html -->
{% extends "accounts/profile.html" %}
{% block title %}My Profile{% endblock %}


{% block profile_content %}
    <div style="display:flex; justify-content:space-between; background:#f2f7ff; padding:20px; border-radius:12px; margin-bottom:20px;">
        <div style="text-align:center; flex:1;">
            <div style="font-size:28px;">ðŸ’°</div>
            <div style="font-weight:600; font-size:14px;">Invested Amount</div>
            <div style="font-size:18px; font-weight:600;">â‚¹{{ total_invested|floatformat:2 }}</div>
        </div>
        <div style="text-align:center; flex:1;">
            <div style="font-size:28px;">ðŸ’µ</div>
            <div style="font-weight:600; font-size:14px;">Current Value</div>
            <div style="font-size:18px; font-weight:600;">â‚¹{{ total_market_value|floatformat:2 }}</div>
        </div>
        <div style="text-align:center; flex:1;">
            <div style="font-size:28px;">ðŸŽ¯</div>
            <div style="font-weight:600; font-size:14px;">Overall Loss/Gain</div>
            <div style="font-size:18px; font-weight:600; color:{% if total_gain_loss >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
                â‚¹{{ total_gain_loss|floatformat:2 }} <span style="font-size:12px;">{{ overall_gain_loss_percent }}%</span>
            </div>
        </div>
        <div style="text-align:center; flex:1;">
            <div style="font-size:28px;">ðŸŸ¢</div>
            <div style="font-weight:600; font-size:14px;">Today's Gain</div>
            <div style="font-size:18px; font-weight:600; color:{% if todays_gain >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
                â‚¹{{ todays_gain|floatformat:2 }} <span style="font-size:12px;">{{ todays_gain_percent }}%</span>
            </div>
        </div>
    </div>

    <!-- Table Header -->
    <div style="display:grid; grid-template-columns:2fr 1fr 1fr 1fr 1fr; padding:10px 20px; font-weight:600; font-size:14px; color:#344767;">
        <div></div>
        <div>Invested Amt</div>
        <div>Market Value</div>
        <div>Overall G/L</div>
        <div>Today's G/L</div>
    </div>

    <!-- Row 1 -->
    <div style="display:grid; grid-template-columns:2fr 1fr 1fr 1fr 1fr; background:#eaf2ff; padding:16px 20px; margin-bottom:12px; border-radius:10px;">
        <div>Unlisted Shares</div>
        <div>â‚¹{{ portfolio_summary.total_invested|default:0|floatformat:2 }}</div>
        <div>â‚¹{{ portfolio_summary.total_market_value|default:0|floatformat:2 }}</div>
        <div style="color:{% if portfolio_summary.overall_gain_loss >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
            â‚¹{{ portfolio_summary.overall_gain_loss|floatformat:2 }} 
            <span style="font-size:12px;">{{ unlisted_overall_percent }}%</span>
        </div>
        <div style="color:{% if portfolio_summary.todays_gain_loss >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
            â‚¹{{ portfolio_summary.todays_gain_loss|floatformat:2 }} 
            <span style="font-size:12px;">{{ unlisted_today_percent }}%</span>
        </div>
    </div>

    <!-- Row 2 -->
    <div style="display:grid; grid-template-columns:2fr 1fr 1fr 1fr 1fr; background:#eaf2ff; padding:16px 20px; border-radius:10px;">
        <div>Other Advisor</div>
        <div>â‚¹{{ advisor_summary.total_invested|floatformat:2 }}</div>
        <div>â‚¹{{ advisor_summary.market_value|floatformat:2 }}</div>
        <div style="color:{% if advisor_summary.overall_gain_loss >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
            â‚¹{{ advisor_summary.overall_gain_loss|floatformat:2 }}
            <span style="font-size:12px;">{{ advisor_overall_percent }}%</span>
        </div>
        <div style="color:{% if advisor_summary.todays_gain_loss >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
            â‚¹{{ advisor_summary.todays_gain_loss|floatformat:2 }}
            <span style="font-size:12px;">{{ advisor_today_percent }}%</span>
        </div>
    </div>
{% endblock %}
