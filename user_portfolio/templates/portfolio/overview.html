<!-- user_portfolio/templates/portfolio/overview.html -->
{% extends "accounts/profile.html" %}
{% block title %}My Profile{% endblock %}
{% load math_filters %}
{% load static%}
{% block profile_content %}
<div class="user-login-overview">
    <!-- Invested Amount -->
    <div class="user-overview-feilds">
        <!-- <div class="user-overview-icons">
            <i class="bi bi-coin text-warning fs-2"></i>
        </div> -->
        <div class="user-overview-details">
            <h3>Invested Amount</h3>
            <p>₹{{ total_invested|floatformat:2 }}</p>
        </div>
    </div>

    <!-- Current Value -->
    <div class="user-overview-feilds">
        <!-- <div class="user-overview-icons">
            <i class="bi bi-cash-stack text-primary fs-2"></i>
        </div> -->
        <div class="user-overview-details">
            <h3>Current Value</h3>
            <p>₹{{ total_market_value|floatformat:2 }}</p>
        </div>
    </div>

    <!-- Overall Loss/Gain -->
    <div class="user-overview-feilds">
        <!-- <div class="user-overview-icons">
            {% if total_gain_loss > 0 %}
                <i class="bi bi-arrow-up-short text-success fs-2"></i>
            {% elif total_gain_loss < 0 %}
                <i class="bi bi-arrow-down-short text-danger fs-2"></i>
            {% else %}
                <i class="bi bi-dash text-dark fs-2"></i>
            {% endif %}
        </div> -->
        <div class="user-overview-details">
            <h3>Overall P/L</h3>
            <p class="{% if total_gain_loss > 0 %}text-success{% elif total_gain_loss < 0 %}text-danger{% else %}text-dark{% endif %}">
                ₹{{ total_gain_loss|floatformat:2 }}
                <span>{{ overall_gain_loss_percent }}%</span>
            </p>
        </div>
    </div>

    <!-- Today's Gain -->
    <div class="user-overview-feilds">
        <!-- <div class="user-overview-icons">
            {% if todays_gain > 0 %}
                <i class="bi bi-arrow-up-short text-success fs-2"></i>
            {% elif todays_gain < 0 %}
                <i class="bi bi-arrow-down-short text-danger fs-2"></i>
            {% else %}
                <i class="bi bi-dash text-dark fs-2"></i>
            {% endif %}
        </div> -->
        <div class="user-overview-details">
            <h3>Today's P/L</h3>
            <p class="{% if todays_gain > 0 %}text-success{% elif todays_gain < 0 %}text-danger{% else %}text-dark{% endif %}">
                ₹{{ todays_gain|floatformat:2 }}
                <span>{{ todays_gain_percent }}%</span>
            </p>
        </div>
    </div>
</div>

<div style="overflow-x: auto;">
<div style="min-width: 800px;">
    <!-- Table Header -->
    <div class="user-login-overview2">
        <div></div>
        <div>Invested Amt</div>
        <div>Market Value</div>
        <div>Overall P/L</div>
        <div>Today's P/L</div>
    </div>

    <!-- Row 1: Unlisted Combined -->
    <div class="user-login-overview3">
        <div>Unlisted Shares</div>
        <div>₹{{ unlisted_summary.total_invested|floatformat:2 }}</div>
        <div>₹{{ unlisted_summary.market_value|floatformat:2 }}</div>
        <div style="color:{% if unlisted_summary.overall_gain_loss >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
            ₹{{ unlisted_summary.overall_gain_loss|floatformat:2 }} 
            <span style="font-size:12px;">{{ unlisted_overall_percent }}%</span>
        </div>
        <div style="color:{% if unlisted_summary.todays_gain_loss >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
            ₹{{ unlisted_summary.todays_gain_loss|floatformat:2 }} 
            <span style="font-size:12px;">{{ unlisted_today_percent }}%</span>
        </div>
    </div>



    <!-- Row 2 -->
    <div class="user-login-overview3">
        <div>Angel Investing</div>
        <div>₹{{ angel_summary.total_invested|floatformat:2 }}</div>
        <div>₹{{ angel_summary.market_value|floatformat:2 }}</div>
        <div style="color:{% if angel_summary.overall_gain_loss >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
            ₹{{ angel_summary.overall_gain_loss|floatformat:2 }}
            <span style="font-size:12px;">{{ angel_overall_percent }}%</span>
        </div>
        <div style="color:{% if angel_summary.todays_gain_loss >= 0 %}#26ba71{% else %}#ff4d4f{% endif %};">
            ₹{{ angel_summary.todays_gain_loss|floatformat:2 }}
            <span style="font-size:12px;">{{ angel_today_percent }}%</span>
        </div>
    </div>
</div>
</div>
{% endblock %}
