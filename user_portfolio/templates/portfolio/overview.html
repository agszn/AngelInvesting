{% extends "accounts/profile.html" %}
{% block title %}My Profile{% endblock %}
{% load math_filters %}

{% block profile_content %}

<!-- Summary Cards -->
<div style="display:flex; justify-content:space-between; background:#f2f7ff; padding:20px; border-radius:12px; margin-bottom:20px;">
    <div style="text-align:center; flex:1;">
        <div style="font-size:28px;">ðŸ’°</div>
        <div style="font-weight:600; font-size:14px;">Invested Amount</div>
        <div style="font-size:18px; font-weight:600;">â‚¹{{ summary.total_invested|floatformat:2 }}</div>
    </div>
    <div style="text-align:center; flex:1;">
        <div style="font-size:28px;">ðŸ’µ</div>
        <div style="font-weight:600; font-size:14px;">Current Value</div>
        <div style="font-size:18px; font-weight:600;">â‚¹{{ summary.total_market_value|floatformat:2 }}</div>
    </div>
    <div style="text-align:center; flex:1;">
        <div style="font-size:28px;">ðŸŽ¯</div>
        <div style="font-weight:600; font-size:14px;">Overall Loss/Gain</div>
        <div style="font-size:18px; font-weight:600; color:#26ba71;">
            â‚¹{{ summary.overall_gain_loss|floatformat:2 }}
            {% if summary.total_invested > 0 %}
                <span style="font-size:12px;">
                    {{ summary.overall_gain_loss|div:summary.total_invested|mul:100|floatformat:2 }}%
                </span>
            {% endif %}
        </div>
    </div>
    <div style="text-align:center; flex:1;">
        <div style="font-size:28px;">ðŸŸ¢</div>
        <div style="font-weight:600; font-size:14px;">Today's Gain</div>
        <div style="font-size:18px; font-weight:600; color:#26ba71;">
            â‚¹{{ summary.todays_gain_loss|floatformat:2 }}
            {% if summary.total_invested > 0 %}
                <span style="font-size:12px;">
                    {{ summary.todays_gain_loss|div:summary.total_invested|mul:100|floatformat:2 }}%
                </span>
            {% endif %}
        </div>
    </div>
</div>

<!-- Table Header -->
<div style="display:grid; grid-template-columns:2fr 1fr 1fr 1fr 1fr; padding:10px 20px; font-weight:600; font-size:14px; color:#344767;">
    <div></div>
    <div>Invested Amt</div>
    <div>Market Value</div>
    <div>Overall G/L</div>
    <div>Today's G/L</div>
</div>

<!-- Advisor-Wise Rows -->
{% for advisor, data in advisor_data.items %}
<div style="display:grid; grid-template-columns:2fr 1fr 1fr 1fr 1fr; background:#eaf2ff; padding:16px 20px; margin-bottom:12px; border-radius:10px;">
    <div>{{ advisor }}</div>
    <div>â‚¹{{ data.invested|floatformat:2 }}</div>
    <div>â‚¹{{ data.market_value|floatformat:2 }}</div>
    <div style="color:#26ba71;">
        â‚¹{{ data.overall_gain|floatformat:2 }}
        <span style="font-size:12px;">{{ data.gain_percent|floatformat:2 }}%</span>
    </div>
    <div style="color:#26ba71;">
        â‚¹{{ data.today_gain|floatformat:2 }}
        <span style="font-size:12px;">{{ data.today_gain_percent|floatformat:2 }}%</span>
    </div>
</div>
{% endfor %}

{% endblock %}
