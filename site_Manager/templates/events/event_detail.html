{% extends "baseStructureSM.html" %}
{% block title %}Event: {{ event.title }}{% endblock %}
{% block subtitle %}Event Details{% endblock %}

{% block SMprofile_content %}
<style>
  .event-wrapper {
    background: #f9fbff; /* light contrast against dark blue bg */
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
  }
  .event-header h3 {
    font-weight: 600;
    color: #0d1a33; /* dark navy for headings */
  }
  .event-subtitle {
    font-size: 1rem;
    color: #6c757d;
  }
  .event-badges .badge {
    font-size: 0.85rem;
    border-radius: 20px;
    padding: 0.45em 0.8em;
  }
  .event-image {
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
  }
  .event-card {
    border: none;
    border-radius: 14px;
    box-shadow: 0 4px 16px rgba(0,0,0,.1);
    background: #ffffff;
  }
</style>

<div class="container mt-4">
  <div class="event-wrapper">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-start mb-3 event-header">
      <div>
        <h3 class="mb-1">{{ event.title }}</h3>
        {% if event.subtitle %}
          <div class="event-subtitle">{{ event.subtitle }}</div>
        {% endif %}
        <div class="mt-3 d-flex flex-wrap gap-2 event-badges">
          {% if event.stock %}
            <span class="badge text-bg-light border">
              {{ event.stock.company_name }}{% if event.stock.ticker %} â€¢ {{ event.stock.ticker }}{% endif %}
            </span>
          {% else %}
            <span class="badge text-bg-light border">No stock linked</span>
          {% endif %}

          {% if event.date_time %}
            <span class="badge text-bg-secondary">
              {{ event.date_time|date:"d M Y, h:i A" }}
            </span>
          {% endif %}

          <span class="badge {{ event.show|yesno:'text-bg-success,text-bg-danger' }}">
            {{ event.show|yesno:"Visible,Hidden" }}
          </span>

          {% if event.document %}
            <a class="badge text-bg-warning text-decoration-none"
               href="{% url 'SM_User:event_pdf' event.pk %}">
              PDF
            </a>
          {% endif %}
        </div>
      </div>

      <!-- Actions -->
      <div class="d-flex gap-2">
        {% if event.document %}
          <a href="{% url 'SM_User:event_pdf' event.pk %}" class="btn btn-outline-primary">
            Download PDF
          </a>
        {% endif %}
        {% if request.user.is_authenticated %}
          <a href="{% url 'SM_User:event_update' event.pk %}" class="btn btn-warning">
            Edit
          </a>
          <a href="{% url 'SM_User:event_delete' event.pk %}" class="btn btn-outline-danger">
            Delete
          </a>
        {% endif %}
      </div>
    </div>

    <!-- Image -->
    {% if event.image %}
      <img src="{{ event.image.url }}" class="img-fluid event-image mb-4" alt="{{ event.title }}">
    {% endif %}

    <!-- Paragraph -->
    {% if event.paragraph %}
      <div class="card event-card">
        <div class="card-body">
          {{ event.paragraph|linebreaks }}
        </div>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
