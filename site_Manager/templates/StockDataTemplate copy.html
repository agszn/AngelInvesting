{% extends 'base.html' %}
{% block content %}

    <h4>StockDate</h4>


<div style="border: 2px solid #28a745; padding: 15px; border-radius: 8px; display: inline-block;">
  <a href="{% url 'SM_User:stockdata_crud' %}" 
     style="
       display: inline-block; 
       padding: 10px 15px; 
       margin: 5px 10px; 
       color: #28a745; 
       text-decoration: none; 
       font-weight: 500; 
       border-radius: 4px; 
       border: 2px solid #28a745;
       transition: background-color 0.3s ease, color 0.3s ease;
     "
     onmouseover="this.style.backgroundColor='#28a745'; this.style.color='white';"
     onmouseout="this.style.backgroundColor=''; this.style.color='#28a745';"
  >Custom Value List</a> 

  <a href="{% url 'SM_User:custom_value_list' %}" 
     style="
       display: inline-block; 
       padding: 10px 15px; 
       margin: 5px 10px; 
       color: #28a745; 
       text-decoration: none; 
       font-weight: 500; 
       border-radius: 4px; 
       border: 2px solid #28a745;
       transition: background-color 0.3s ease, color 0.3s ease;
     "
     onmouseover="this.style.backgroundColor='#28a745'; this.style.color='white';"
     onmouseout="this.style.backgroundColor=''; this.style.color='#28a745';"
  >Custom Field List</a>

  <a href="{% url 'SM_User:convert_docx_to_html' %}" 
     style="
       display: inline-block; 
       padding: 10px 15px; 
       margin: 5px 10px; 
       color: #28a745; 
       text-decoration: none; 
       font-weight: 500; 
       border-radius: 4px; 
       border: 2px solid #28a745;
       transition: background-color 0.3s ease, color 0.3s ease;
     "
     onmouseover="this.style.backgroundColor='#28a745'; this.style.color='white';"
     onmouseout="this.style.backgroundColor=''; this.style.color='#28a745';"
  >Docx to html</a>
</div>


{% block SMprofile_content %}
    <h4>StockDate</h4>

<form method="get" class="row g-3 mb-3">
  <div class="col-md-3">
    <input type="text" name="search" class="form-control" placeholder="Search by Company / Scrip / ISIN" value="{{ filters.search_query }}">
  </div>

  <div class="col-md-2">
    <select name="sector" class="form-select">
      <option value="">All Sectors</option>
      {% for sector in sectors %}
        <option value="{{ sector }}" {% if filters.sector == sector %}selected{% endif %}>{{ sector }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-md-2">
    <select name="category" class="form-select">
      <option value="">All Categories</option>
      {% for category in categories %}
        <option value="{{ category }}" {% if filters.category == category %}selected{% endif %}>{{ category }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-md-2">
    <select name="conviction_level" class="form-select">
      <option value="">All Conviction Levels</option>
      {% for cl in conviction_levels %}
        <option value="{{ cl }}" {% if filters.conviction_level == cl %}selected{% endif %}>{{ cl }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-md-2">
    <select name="stock_type" class="form-select">
      <option value="">All Stock Types</option>
      {% for st in stock_types %}
        <option value="{{ st }}" {% if filters.stock_type == st %}selected{% endif %}>{{ st }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-md-1">
    <button type="submit" class="btn btn-primary w-100">Filter</button>
  </div>
</form>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Company</th>
            <th>Scrip</th>
            <th>Sector</th>
            <th>Conviction</th>
            <th>Share Price</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for stock in stocks %}
            <tr>
                <td>{{ stock.company_name }}</td>
                <td>{{ stock.scrip_name }}</td>
                <td>{{ stock.sector }}</td>
                <td>{{ stock.conviction_level }}</td>
                <td>{{ stock.share_price }}</td>
                <td>
                    <td>
                        <a href="{% url 'SM_User:edit_stockdata' stock.pk %}" class="btn btn-sm btn-warning">Edit</a>
                    </td>

                    <!-- <a href="#" class="btn btn-sm btn-danger">Delete</a> -->
                </td>
            </tr>
        {% empty %}
            <tr><td colspan="6" class="text-center">No matching stocks found.</td></tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}


<form method="get" class="row g-3 mb-3">
  <div class="col-md-3">
    <input type="text" name="search" class="form-control" placeholder="Search by Company / Scrip / ISIN" value="{{ filters.search_query }}">
  </div>

  <div class="col-md-2">
    <select name="sector" class="form-select">
      <option value="">All Sectors</option>
      {% for sector in sectors %}
        <option value="{{ sector }}" {% if filters.sector == sector %}selected{% endif %}>{{ sector }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-md-2">
    <select name="category" class="form-select">
      <option value="">All Categories</option>
      {% for category in categories %}
        <option value="{{ category }}" {% if filters.category == category %}selected{% endif %}>{{ category }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-md-2">
    <select name="conviction_level" class="form-select">
      <option value="">All Conviction Levels</option>
      {% for cl in conviction_levels %}
        <option value="{{ cl }}" {% if filters.conviction_level == cl %}selected{% endif %}>{{ cl }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-md-2">
    <select name="stock_type" class="form-select">
      <option value="">All Stock Types</option>
      {% for st in stock_types %}
        <option value="{{ st }}" {% if filters.stock_type == st %}selected{% endif %}>{{ st }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="col-md-1">
    <button type="submit" class="btn btn-primary w-100">Filter</button>
  </div>
</form>
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Company</th>
            <th>Scrip</th>
            <th>Sector</th>
            <th>Conviction</th>
            <th>Share Price</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for stock in stocks %}
            <tr>
                <td>{{ stock.company_name }}</td>
                <td>{{ stock.scrip_name }}</td>
                <td>{{ stock.sector }}</td>
                <td>{{ stock.conviction_level }}</td>
                <td>{{ stock.share_price }}</td>
                <td>
                    <td>
                        <a href="{% url 'SM_User:edit_stockdata' stock.pk %}" class="btn btn-sm btn-warning">Edit</a>
                    </td>

                    <!-- <a href="#" class="btn btn-sm btn-danger">Delete</a> -->
                </td>
            </tr>
        {% empty %}
            <tr><td colspan="6" class="text-center">No matching stocks found.</td></tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
