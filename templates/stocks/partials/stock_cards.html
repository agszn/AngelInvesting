<!-- templates/stocks/partials/stock_cards.html -->
{% for stock in stocks %}
  {% if stock.company_overview and not stock.hide_company_overview %}
    <!-- <a href="{% url 'unlisted_stock_marketplace:stock_detail' stock.id %}"> -->
      <div class="card-boxes">
        <a href="{% url 'unlisted_stock_marketplace:stock_detail' stock.id %}" class="card-link">
        <div class="cards">
          <div class="cards-first-info">
            {% if stock.logo %}
              <div class="logo-wrapper">
                <!-- <a href="{% url 'unlisted_stock_marketplace:stock_detail' stock.id %}"> -->
                  <img class="stock-card-image" src="{{ stock.logo.url }}" alt="{{ stock.company_name }} Logo">
                <!-- </a> -->
              </div>
            {% endif %}
            <div class="card-icons">
              <button class="wishlist-btn" style="border: none; background-color: #F9FCF4;" 
                data-stock-id="{{ stock.id }}" 
                data-stock-name="{{ stock.company_name }}" 
                data-url="{% url 'unlisted_stock_marketplace:get_next_wishlist_group_name' %}">
                <i class="bi bi-heart" title="Wishlist"></i>
              </button>
              <!-- <a href="{% url 'unlisted_stock_marketplace:stock_detail' stock.id %}" target="_blank" style="text-decoration: none; color: #666;">
                      <i class="bi bi-info-circle" title="{{ stock.description }}"></i>
              </a> -->
               <span 
                    onclick="event.stopPropagation(); window.open('{{ stock.youtube_video_link|default:'#' }}', '_blank', 'noopener')" 
                    style="cursor: pointer; color: #666;"
                    title="{{ stock.description }}"
                >
                    <i class="bi bi-info-circle"></i>
                </span>

              <!-- {% if stock.youtube_video_link %}
                  <a href="{{ stock.youtube_video_link }}" target="_blank" style="text-decoration: none; color: #666;">
                      <i class="bi bi-info-circle" title="Watch Video"></i>
                  </a>
              {% endif %} -->

            </div>
          </div>

          <div class="cards-second-info">
            <div class="cards-share-name"><strong>{{ stock.sector }}</strong></div>
            <div class="cards-share-level">Conviction level <strong>Very High</strong></div>
          </div>

          <div class="cards-third-info">
            <div>Lot Size: <strong>{{ stock.lot }} Shares</strong> </div>
                <div>Share Price: <strong>â‚¹{{ stock.share_price }}</strong>
                {% include 'includes/percentage_diff.html' %}
                </div>
          </div>
        </a>
          <div class="cards-fourth-info">
            <button class="cards-buy-button" 
              onclick='openBuyModal(
                "{{ stock.id }}",
                "{{ stock.company_name|escapejs }}",
                "{{ stock.share_price }}",
                "{{ stock.quantity }}",
                "{% url 'user_portfolio:buy_stock' stock.id %}"
              )'>Buy</button>

            <button class="cards-sell-button"
              onclick='openSellModal(
                "{{ stock.id }}",
                "{{ stock.company_name|escapejs }}",
                "{{ stock.share_price }}",
                "{{ stock.quantity }}",
                "{% url 'user_portfolio:sell_stock' stock.id %}"
              )'>Sell</button>
          </div>
        </div>
        
      </div>
    <!-- </a> -->
  {% endif %}
{% empty %}
  <p>No matching stocks found.</p>
{% endfor %}
