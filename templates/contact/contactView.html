{% extends "baseStructureSM.html" %}
{% block title %}Users{% endblock %}
{% block subtitle %} Users {% endblock %}

{% block SMprofile_content %}
<style>
    .user-portfolio-toptable1 td {
        padding: 8px;
        border: 1px solid #ddd;
        vertical-align: top;
        word-wrap: break-word;
        overflow-wrap: anywhere;
        white-space: normal;
    }
    .user-portfolio-toptable1 td:nth-child(1) { width: 15%; } /* Name */
    .user-portfolio-toptable1 td:nth-child(2) { width: 22%; } /* Email */
    .user-portfolio-toptable1 td:nth-child(3) { width: 15%; } /* Subject */
    .user-portfolio-toptable1 td:nth-child(4) { width: 30%; } /* Message */
    .user-portfolio-toptable1 td:nth-child(5) { width: 18%; } /* Sent at */

    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }

    .pagination a {
        margin: 0 5px;
        padding: 5px 10px;
        border-radius: 5px;
        text-decoration: none;
        background-color: #007bff;
        color: white;
    }

    .pagination a:hover {
        background-color: #0056b3;
    }

    .pagination .current {
        margin: 0 5px;
        padding: 5px 10px;
        border-radius: 5px;
        /* background-color: #e9ecef; */
    }
</style>

<div class="container mt-5">
    <div class="user-portfolio-top">
        <div class="user-dashboard-heading"><h3><i class="bi bi-chat-dots"></i> Contact Messages</h3></div>
    </div>
    <div class="SMtable-scroll-container">
        <table class="user-portfolio-toptable1">
            <thead class="user-portfolio-head-admin">
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th> <!-- Added Phone column -->
                    <th>Subject</th>
                    <th>Message</th>
                    <th>Sent At</th>
                </tr>
            </thead>
            <tbody>
                {% for contact in page_obj %}
                <tr>
                    <td>{{ contact.name }}</td>
                    <td>{{ contact.email }}</td>
                    <td>{{ contact.phone }}</td> <!-- Display phone number -->
                    <td>{{ contact.subject }}</td>
                    <td>{{ contact.message }}</td>
                    <td>{{ contact.sent_at|date:"Y-m-d H:i" }}</td> <!-- formatted timestamp -->
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6">No contact messages found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Pagination -->
        <div class="pagination">
            <span class="step-links">
                {% if page_obj.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                {% endif %}
                <span class="current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>
                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}">next</a>
                    <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
            </span>
        </div>
    </div>
</div>

{% endblock %}
