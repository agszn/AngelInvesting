<!-- RM_User/templates/transaction/edit_sell_transaction.html -->
{% extends "baseStructureRM.html" %}

{% block title %}Edit Sell Transaction{% endblock %}
{% block SubTitleRM %}Edit Sell Transaction â€“ {{ transaction.stock.company_name }}{% endblock %}

{% block RMprofile_content %}
<form method="post">
  {% csrf_token %}

  <!-- Row 1: Static Info (Order ID, Stock Name, Market Price) -->
  <div style="display: flex; margin-bottom: 15px;">
    <div style="flex: 1; padding: 0 10px;">
      <label><strong>Order ID:</strong></label>
      <div class="form-control" readonly>{{ transaction.order_id }}</div>
    </div>
    <div style="flex: 1; padding: 0 10px;">
      <label><strong>Stock:</strong></label>
      <div class="form-control" readonly>{{ transaction.stock.company_name }}</div>
    </div>
    <div style="flex: 1; padding: 0 10px;">
      <label><strong>Market Price:</strong></label>
      <div class="form-control" readonly>{{ transaction.stock.share_price }}</div>
    </div>
  </div>

  <!-- Row 2: Quantity, Timestamp, Selling Price -->
  <div style="display: flex; margin-bottom: 15px;">
    <div style="flex: 1; padding: 0 10px;">
      <label><strong>Quantity:</strong></label>
      <div class="form-control" readonly>{{ transaction.quantity }}</div>
    </div>
    <div style="flex: 1; padding: 0 10px;">
      <label><strong>Timestamp:</strong></label>
      <div class="form-control" readonly>{{ transaction.timestamp }}</div>
    </div>
    <div style="flex: 1; padding: 0 10px;">
      <label>{{ form.price_per_share.label }}</label>
      {{ form.price_per_share }}
    </div>
  </div>

  <!-- Row 3: RM Status (editable) -->
  <div style="display: flex; margin-bottom: 15px;">
    {% for field in form.visible_fields %}
    <div style="flex: 1; padding: 0 10px;">
        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
        {{ field }}
        {% if field.errors %}
            <div class="text-danger">{{ field.errors }}</div>
        {% endif %}
    </div>
    {% endfor %}
  </div>

  <!-- Row 4: Buttons -->
  <div style="display: flex; margin-top: 20px;">
    <div style="flex: 1; padding: 0 10px;"></div>
    <div style="flex: 1; padding: 0 10px;">
      <button type="submit" style="width: 100%; height: 38px; background-color: #007bff; color: white; border: none; border-radius: 4px;">
        Update
      </button>
    </div>
    <div style="flex: 1; padding: 0 10px;">
      <a href="{% url 'RM_User:selldersummeryRM' transaction.order_id %}" class="btn btn-secondary" style="width: 100%; height: 38px;">
        Cancel
      </a>
    </div>
  </div>
</form>
{% endblock %}
